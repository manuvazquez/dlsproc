---

title: bundle


keywords: fastai
sidebar: home_sidebar

summary: "Functionality to deal with multiple XML files"
description: "Functionality to deal with multiple XML files"
nb_path: "20_bundle.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 20_bundle.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Directory where the zip files are stored</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">directory</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="o">.</span><span class="n">cwd</span><span class="p">()</span> <span class="o">/</span> <span class="s1">&#39;samples&#39;</span>
<span class="k">assert</span> <span class="n">directory</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>
<span class="n">directory</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>PosixPath(&#39;/home/manu/dlsproc/samples&#39;)</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>A (sample) file in that directory</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">input_file</span> <span class="o">=</span> <span class="n">directory</span> <span class="o">/</span> <span class="s1">&#39;PlataformasAgregadasSinMenores_202201_05-06.zip&#39;</span>
<span class="k">assert</span> <span class="n">input_file</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>
<span class="n">input_file</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>PosixPath(&#39;/home/manu/dlsproc/samples/PlataformasAgregadasSinMenores_202201_05-06.zip&#39;)</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>A function to read <strong>all</strong> the <em>XML</em> files contained in a given zip file.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="read_zip" class="doc_header"><code>read_zip</code><a href="https://github.com/manuvazquez/dlsproc/tree/master/dlsproc/bundle.py#L12" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>read_zip</code>(<strong><code>input_file</code></strong>:<code>Path</code>[<code>str</code>, <code>Path</code>])</p>
</blockquote>
<p>Reads and parses an XML file into a <code>pd.DataFrame</code>.</p>
<p><strong>Parameters</strong></p>
<ul>
<li><p>input_file: str or Path</p>
<p>Input file.</p>
</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li><p>out: pd.DataFrame</p>
<p>A Pandas DataFrame with XML data.</p>
</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dfs_zip</span> <span class="o">=</span> <span class="n">read_zip</span><span class="p">(</span><span class="n">input_file</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">dfs_zip</span><span class="p">)</span><span class="si">=}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">dfs_zip</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>len(dfs_zip)=2
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>summary</th>
      <th>title</th>
      <th>updated</th>
      <th>ContractFolderStatus - ContractFolderID</th>
      <th>ContractFolderStatus - ContractFolderStatusCode</th>
      <th>ContractFolderStatus - LocatedContractingParty - BuyerProfileURIID</th>
      <th>ContractFolderStatus - LocatedContractingParty - Party - PartyName - Name</th>
      <th>ContractFolderStatus - LocatedContractingParty - ParentLocatedParty - PartyName - Name</th>
      <th>ContractFolderStatus - ProcurementProject - Name</th>
      <th>...</th>
      <th>ContractFolderStatus - ProcurementProject - PlannedPeriod - StartDate</th>
      <th>ContractFolderStatus - LegalDocumentReference - ID</th>
      <th>ContractFolderStatus - LegalDocumentReference - Attachment - ExternalReference - URI</th>
      <th>ContractFolderStatus - ProcurementProject - PlannedPeriod - EndDate</th>
      <th>ContractFolderStatus - TechnicalDocumentReference - ID</th>
      <th>ContractFolderStatus - TechnicalDocumentReference - Attachment - ExternalReference - URI</th>
      <th>ContractFolderStatus - LocatedContractingParty - ParentLocatedParty - ParentLocatedParty - PartyName - Name</th>
      <th>ContractFolderStatus - TenderingProcess - ParticipationRequestReceptionPeriod - EndDate</th>
      <th>ContractFolderStatus - TenderingProcess - ParticipationRequestReceptionPeriod - EndTime</th>
      <th>ContractFolderStatus - TenderingProcess - TenderSubmissionDeadlinePeriod</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>https://contrataciondelestado.es/sindicacion/P...</td>
      <td>Id licitación: 2021039438; Órgano de Contratac...</td>
      <td>L'objecte és la contractació del servei de bug...</td>
      <td>2022-01-04 13:12:09.464000+01:00</td>
      <td>2021039438</td>
      <td>RES</td>
      <td>https://contractaciopublica.gencat.cat/ecofin_...</td>
      <td>Ajuntament de Girona</td>
      <td>Entitats municipals de Catalunya</td>
      <td>L'objecte és la contractació del servei de bug...</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2021-12-13 23:59:00</td>
    </tr>
    <tr>
      <th>1</th>
      <td>https://contrataciondelestado.es/sindicacion/P...</td>
      <td>Id licitación: 2021_2568; Órgano de Contrataci...</td>
      <td>Servei comunicacions postals de l'Ajuntament d...</td>
      <td>2022-01-04 13:12:09.400000+01:00</td>
      <td>2021_2568</td>
      <td>ADJ</td>
      <td>https://contractaciopublica.gencat.cat/ecofin_...</td>
      <td>Ajuntament de Collbató</td>
      <td>Entitats municipals de Catalunya</td>
      <td>Servei comunicacions postals de l'Ajuntament d...</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2021-11-29 23:59:00</td>
    </tr>
    <tr>
      <th>2</th>
      <td>https://contrataciondelestado.es/sindicacion/P...</td>
      <td>Id licitación: 12450/2021; Órgano de Contratac...</td>
      <td>L'objecte del contracte és l'execució de les o...</td>
      <td>2022-01-04 13:12:09.343000+01:00</td>
      <td>12450/2021</td>
      <td>ADJ</td>
      <td>https://contractaciopublica.gencat.cat/ecofin_...</td>
      <td>Ajuntament de Mont-roig del Camp</td>
      <td>Entitats municipals de Catalunya</td>
      <td>L'objecte del contracte és l'execució de les o...</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2021-12-20 14:00:00</td>
    </tr>
    <tr>
      <th>3</th>
      <td>https://contrataciondelestado.es/sindicacion/P...</td>
      <td>Id licitación: 2021/14/M0400100; Órgano de Con...</td>
      <td>El serveiobjecte del contracte és la difusió p...</td>
      <td>2022-01-04 13:12:09.285000+01:00</td>
      <td>2021/14/M0400100</td>
      <td>ADJ</td>
      <td>https://contractaciopublica.gencat.cat/ecofin_...</td>
      <td>Casa de Cultura de Girona</td>
      <td>Entitats municipals de Catalunya</td>
      <td>El serveiobjecte del contracte és la difusió p...</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2021-10-22 14:00:00</td>
    </tr>
    <tr>
      <th>4</th>
      <td>https://contrataciondelestado.es/sindicacion/P...</td>
      <td>Id licitación: ICVI-2022-1; Órgano de Contrata...</td>
      <td>Servei de neteja de les instal·lacions de l'IN...</td>
      <td>2022-01-04 13:12:09.227000+01:00</td>
      <td>ICVI-2022-1</td>
      <td>ADJ</td>
      <td>https://contractaciopublica.gencat.cat/ecofin_...</td>
      <td>Institut Català de la Vinya i el Vi (INCAVI)</td>
      <td>Departaments i Sector Públic de la Generalitat</td>
      <td>Servei de neteja de les instal·lacions de l'IN...</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2021-11-30 18:00:00</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>470</th>
      <td>https://contrataciondelestado.es/sindicacion/P...</td>
      <td>Id licitación: 1840/2020; Órgano de Contrataci...</td>
      <td>Serveis de restauració, ordenació, conservació...</td>
      <td>2022-01-03 13:56:52.179000+01:00</td>
      <td>1840/2020</td>
      <td>ADJ</td>
      <td>https://contractaciopublica.gencat.cat/ecofin_...</td>
      <td>Ajuntament de Sentmenat</td>
      <td>Entitats municipals de Catalunya</td>
      <td>Serveis de restauració, ordenació, conservació...</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2021-11-22 23:00:00</td>
    </tr>
    <tr>
      <th>471</th>
      <td>https://contrataciondelestado.es/sindicacion/P...</td>
      <td>Id licitación: CO/AH07/1101269556/21/PS; Órgan...</td>
      <td>Obres del nou centre de dades de l'Hospital de...</td>
      <td>2022-01-03 13:56:52.113000+01:00</td>
      <td>CO/AH07/1101269556/21/PS</td>
      <td>RES</td>
      <td>https://contractaciopublica.gencat.cat/ecofin_...</td>
      <td>Institut Català de la Salut (ICS)</td>
      <td>Departaments i Sector Públic de la Generalitat</td>
      <td>Obres del nou centre de dades de l'Hospital de...</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2021-11-15 10:00:00</td>
    </tr>
    <tr>
      <th>472</th>
      <td>https://contrataciondelestado.es/sindicacion/P...</td>
      <td>Id licitación: 4/2021; Órgano de Contratación...</td>
      <td>Servicio de Consultoría y asistencia Técnica e...</td>
      <td>2022-01-03 13:56:21.356000+01:00</td>
      <td>4/2021</td>
      <td>EV</td>
      <td>NaN</td>
      <td>Junta de Gobierno Local</td>
      <td>Ayuntamiento de Zierbena</td>
      <td>Servicio de Consultoría y asistencia Técnica e...</td>
      <td>...</td>
      <td>NaN</td>
      <td>Cláusulas administrativas especiales 2021.pdf</td>
      <td>https://www.contratacion.euskadi.eus/ac70cPubl...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Ayuntamiento de Zierbena</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2021-11-10 13:00:00</td>
    </tr>
    <tr>
      <th>473</th>
      <td>https://contrataciondelestado.es/sindicacion/P...</td>
      <td>Id licitación: 2021/CO_ASER/0120; Órgano de C...</td>
      <td>Formación a personas emprendedoras\n</td>
      <td>2022-01-03 13:56:20.897000+01:00</td>
      <td>2021/CO_ASER/0120</td>
      <td>EV</td>
      <td>NaN</td>
      <td>Concejala-Delegada del Departamento de Promoci...</td>
      <td>Ayuntamiento de Vitoria-Gasteiz</td>
      <td>Formación a personas emprendedoras</td>
      <td>...</td>
      <td>NaN</td>
      <td>ASER0120_Pliego_Clausulas_Administrativas_Part...</td>
      <td>https://www.contratacion.euskadi.eus/ac70cPubl...</td>
      <td>NaN</td>
      <td>ASER0120_Pliego_Prescripciones_Tecnicas_Partic...</td>
      <td>https://www.contratacion.euskadi.eus/ac70cPubl...</td>
      <td>Ayuntamiento de Vitoria-Gasteiz</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2021-11-26 13:00:00</td>
    </tr>
    <tr>
      <th>474</th>
      <td>https://contrataciondelestado.es/sindicacion/P...</td>
      <td>Id licitación: 15/2021; Órgano de Contratació...</td>
      <td>“Reforestación de 8,8 HA en el paraje “MONTAÑO...</td>
      <td>2022-01-03 13:56:20.849000+01:00</td>
      <td>15/2021</td>
      <td>EV</td>
      <td>NaN</td>
      <td>Junta de Gobierno Local</td>
      <td>Ayuntamiento de Zierbena</td>
      <td>“Reforestación de 8,8 HA en el paraje “MONTAÑO...</td>
      <td>...</td>
      <td>NaN</td>
      <td>3 Pliego admvo Reforestación Montaño Publicaci...</td>
      <td>https://www.contratacion.euskadi.eus/ac70cPubl...</td>
      <td>NaN</td>
      <td>Obra repoblación Montaño - MUP 66 Publicado.pdf</td>
      <td>https://www.contratacion.euskadi.eus/ac70cPubl...</td>
      <td>Ayuntamiento de Zierbena</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2021-12-07 13:00:00</td>
    </tr>
  </tbody>
</table>
<p>475 rows × 39 columns</p>
</div></div>

</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

